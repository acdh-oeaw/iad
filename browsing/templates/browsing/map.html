{% extends "webpage/base.html" %}
{% load staticfiles %}
{% load django_tables2 %}
{% load i18n %}
{% load webpage_extras %}
{% load leaflet_tags %}
{% load archiv_extras %}
{% block scriptHeader %}
    {% leaflet_js %}
    {% leaflet_css %}
{% endblock %}
{% block Titel %} {% endblock %}
{% block content %}
<style>
    .leaflet-container {  /* all maps */
        width:  100%;
        height: 800px;
    }
    .info {
    background-color: #ffffff;
    padding: 20px;
}
	.h-hr {
    height: 4px;
    border: 0;
    background: #caebf2;
}
@media (max-width: 768px) {
    .info {
        width: 100%;
        padding: 10px;
    }
    .info > h3 {
       font-size: 1rem;
       margin-bottom: 0px; 
    }
    .h-hr {
        margin-bottom: 10px;
        margin-top: 10px;
    }


}
</style>
<div>
{% leaflet_map "yourmap" callback="window.map_init_basic" %}
</div>

<script type="text/javascript">
// var map = L.map("yourmap", {
// 	// основные настройки

//     zoomControl: false,
	
// });

    function map_init_basic (map, options) {
//for x
{% for object in sites %}
        var geojsonFeature = {{ object.get_geojson|safe }};
        L.geoJson(geojsonFeature).addTo(map);
        {% if object.has_archent.all %}
        {% for x in object.has_archent.all %}
        var geojsonFeatureArchEnt = {{ x.get_geojson|safe }};
        L.geoJson(geojsonFeatureArchEnt).addTo(map);
      	{% endfor %}
      	{% endif %}
// end for
{% endfor %}
//add info panel on the map
        var info = L.control({position: 'bottomleft'});
        info.onAdd = function (map) {
            this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
            this.update();
            return this._div;
        };
        // method that we will use to update the control based on feature properties passed
        info.update = function (props) {
            this._div.innerHTML = '<h3>Search I-A-D Map</h3><hr class="h-hr">';
        };
        info.addTo(map);
        // change position of zoom controls
  //       L.control.zoom({
  //    	position:'topright'
		// }).addTo(map);


    }

</script>
{% endblock %}