{% extends "webpage/base.html" %}
{% load staticfiles %}
{% load stats_extras %}
{% load webpage_extras %}
{% load archiv_extras %}
{% load leaflet_tags %}
{% block scriptHeader %}
    {% leaflet_js %}
    {% leaflet_css %}
{% endblock %}
{% block content %}
<div class="jumbotron" style="padding:0;">

    {% leaflet_map "yourmap" callback="window.map_init_basic" %}%}

</div>
<div class="container">
    <h1 style="text-align:center; color: #111;">{% projects_metadata 'title' %}</h1>
        <div class="row" style="padding:10px;">
            <div class="col-md-6">
                <div class="card site-page">
                    <div class="card-body">
                        <h5 class="card-title">Sites</h5>
                        <p class="card-text">Provide some short text.</p>
                        <a href="{% url 'browsing:browse_sites' %}" class="btn btn-outline-secondary" style="color:white; border-color:white;">browse</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card archent-page">
                    <div class="card-body">
                        <h5 class="card-title">Archaelogical Entities</h5>
                        <p class="card-text">Provide some short text.</p>
                        <a href="{% url 'browsing:browse_archents' %}" class="btn btn-outline-secondary" style="color:white; border-color:white;">browse</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="padding:10px;">
            <div class="col-md-6">
                <div class="card researchevent-page">
                    <div class="card-body">
                        <h5 class="card-title">Research Activities</h5>
                        <p class="card-text">Provide some short text.</p>
                        <a href="{% url 'browsing:browse_researchevents' %}" class="btn btn-outline-secondary" style="color:white; border-color:white;">browse</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card monumentprotection-page">
                    <div class="card-body">
                        <h5 class="card-title">Monument Protection</h5>
                        <p class="card-text">Provide some short text.</p>
                        <a href="{% url 'browsing:browse_monumentprotections' %}" class="btn btn-outline-secondary" style="color:white; border-color:white;">browse</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">
                    {% projects_metadata 'subtitle' %}
                </h5>
                <p class="card-text">
                    {% projects_metadata 'description' %}
                </p>
            </div>
        </div>
        <div class="card" style="text-align:center;">
            <div class="card-body">
                <h2 class="card-title">
                    Statistics
                </h5>
                <div class="row" style="padding:10px;">
                    <div class="col-md-6">
                        <div class="card site-page">
                            <div class="card-body">
                                <h5 class="card-title">The number of sites entered per country</h5>
                                <p class="card-text">
                                    <a href="{% url 'browsing:browse_monumentprotections' %}" class="btn btn-outline-secondary" style="color:white; border-color:white;">
                                        {% sites_by_country as result %}
                                        {% for key, value in result.items %}
                                            {{ key }}: {{ value }} {% if not forloop.last %}|{% endif %}
                                        {% endfor %}
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card archent-page">
                            <div class="card-body">
                                <h5 class="card-title">The number of sites with high touristic potential</h5>
                                <p class="card-text">
                                    <a href="{% url 'browsing:browse_monumentprotections' %}" class="btn btn-outline-secondary" style="color:white; border-color:white;">12 (out of 133)</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="padding:10px;">
                    <div class="col-md-6">
                        <div class="card researchevent-page">
                            <div class="card-body">
                                <h5 class="card-title">The number of sites that are protected</h5>
                                <p class="card-text">
                                    <a href="{% url 'browsing:browse_monumentprotections' %}" class="btn btn-outline-secondary" style="color:white; border-color:white;">89</a>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card monumentprotection-page">
                            <div class="card-body">
                                <h5 class="card-title">the extent of the sites that have been researched</h5>
                                <p class="card-text">
                                    <a href="{% url 'browsing:browse_monumentprotections' %}" class="btn btn-outline-secondary" style="color:white; border-color:white;">587 km<sup>2</sup></a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


</div>
<script>
    {% archiv_custom_js %}

    {% archiv_colors %}

    function map_init_basic (map, options) {

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox.light',
            accessToken: 'pk.eyJ1Ijoic2VubmllcmVyIiwiYSI6ImNpbHk1YWV0bDAwZnB2dW01d2l1Y3phdmkifQ.OljQLEhqeAygai2y6VoSwQ'
        }).addTo(map);

        var SiteShapeLayer = L.geoJson({{shapes|safe }}, {
            onEachFeature: onEachFeatureClosure('site')
        }).setStyle(SiteStyle);
        SiteShapeLayer.addTo(map);
        map.layerscontrol.addOverlay(SiteShapeLayer, 'Sites (Shapes)');
        map.fitBounds(SiteShapeLayer.getBounds());

        var SitePointLayer = L.geoJson({{points|safe }}, {
            onEachFeature: onEachFeatureClosure('site')
        });
        map.layerscontrol.addOverlay(SitePointLayer, 'Sites (Points)');

        var ArchentShapeLayer = L.geoJson({{shapes_archent|safe }}, {
            onEachFeature: onEachFeatureClosure('archent')
        }).setStyle(ArchEntStyle);
        ArchentShapeLayer.addTo(map);
        map.layerscontrol.addOverlay(ArchentShapeLayer, 'Archents (Shapes)');

        var ResearchEventShapeLayer = L.geoJson({{shapes_researchevent|safe }}, {
            onEachFeature: onEachFeatureClosure('researchevent')
        }).setStyle(ResearchEventStyle);
        map.layerscontrol.addOverlay(ResearchEventShapeLayer, 'Research Activities (Shapes)');

        var MonumentProtectionShapeLayer = L.geoJson({{shapes_monumentprotection|safe }}, {
            onEachFeature: onEachFeatureClosure('monumentprotection')
        }).setStyle(MonumentProtectionStyle);
        map.layerscontrol.addOverlay(MonumentProtectionShapeLayer, 'Monument Protection (Shapes)');

    }
</script>
{% endblock %}
